(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{23:function(e,t,n){},26:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var s,c,o=n(1),r=n.n(o),a=n(14),i=n.n(a),l=(n(23),n(2)),u=n.n(l),j=n(4),d=n(3),h=(n(25),n(26),n(0)),b=function(e){var t=e.condition,n=e.children;return Object(h.jsx)(h.Fragment,{children:t&&n})},p="http://localhost:8080",m=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p+t,{method:"GET",signal:n,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,fetch(p+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){var t=e.setLoggedIn,n=e.setMainState,s=(e.setPage,e.setUser),c=Object(o.useState)(null),r=Object(d.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)(null),b=Object(d.a)(l,2),p=b[0],m=b[1],x=Object(o.useState)(null),f=Object(d.a)(x,2),g=f[0],w=f[1],v=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/user/user_login",{name:a,password:p});case 2:n=e.sent,console.log(!n.fail),n.fail?(console.log("hej"),w(n.fail)):(s(n),t(!0));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("section",{className:"flex login-top",children:Object(h.jsx)("div",{className:"glimra-logo"})}),Object(h.jsxs)("section",{className:"flex login-container",children:[Object(h.jsx)("h2",{className:"login-welcome",children:"V\xe4lkommen!"}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"login-text",htmlFor:"namn",children:"namn:"}),Object(h.jsx)("input",{className:"login-input",type:"text",name:"",placeholder:"namn",onChange:function(e){return i(e.target.value)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"login-text",htmlFor:"password",children:"l\xf6senord:"}),Object(h.jsx)("input",{className:"login-input",type:"password",name:"",placeholder:"l\xf6senord",onChange:function(e){return m(e.target.value)}})]}),Object(h.jsx)("div",{children:g}),Object(h.jsx)("button",{className:"login-btn",onClick:function(){return v()},children:"logga in"}),Object(h.jsxs)("div",{className:"login-create-user",children:["Ny anv\xe4ndare?"," ",Object(h.jsx)("span",{className:"create-user-link",onClick:function(){return n("signup")},children:"skapa konto"})]}),Object(h.jsx)("div",{className:"login-tree"})]})]})},f=function(e){e.setLoggedIn;var t=e.setMainState,n=(e.setPage,e.setUser,Object(o.useState)(null)),s=Object(d.a)(n,2),c=s[0],r=s[1],a=Object(o.useState)("test@test.com"),i=Object(d.a)(a,2),l=i[0],b=(i[1],Object(o.useState)(0)),p=Object(d.a)(b,2),m=p[0],O=p[1],x=Object(o.useState)(null),f=Object(d.a)(x,2),g=f[0],w=f[1],v=Object(o.useState)(null),C=Object(d.a)(v,2),_=C[0],N=C[1],k=Object(o.useState)(null),S=Object(d.a)(k,2),y=S[0],P=(S[1],function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",_),t.append("name",c),t.append("password",g),t.append("email",l),t.append("type",m),e.next=8,fetch("http://localhost:8080/user/create_user",{method:"POST",body:t}).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("section",{className:"flex login-top",children:Object(h.jsx)("div",{className:"glimra-logo"})}),Object(h.jsxs)("section",{className:"flex login-container",children:[Object(h.jsxs)("section",{className:"flex JC-SB heading",children:[Object(h.jsx)("span",{className:"back-arrow login-welcome",onClick:function(){return t("login")},children:Object(h.jsx)("i",{class:"fas fa-arrow-left"})}),Object(h.jsx)("span",{className:"login-welcome",children:"Skapa konto"}),Object(h.jsx)("span",{})]}),Object(h.jsx)("input",{hidden:!0,className:"login-input",type:"text",name:"email",placeholder:"name",value:l}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("label",{className:"login-text",htmlFor:"",children:["name:"," "]}),Object(h.jsx)("input",{className:"login-input",type:"text",name:"name",placeholder:"name",onChange:function(e){return r(e.target.value)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("label",{className:"login-text",htmlFor:"password",children:["password:"," "]}),Object(h.jsx)("input",{className:"login-input",type:"password",name:"password",placeholder:"password",onChange:function(e){return w(e.target.value)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{className:"login-text",htmlFor:"",children:"Deltagare"})," ",Object(h.jsx)("input",{type:"checkbox",name:"type",onClick:function(){return O(0)}}),Object(h.jsx)("label",{className:"login-text",htmlFor:"",children:"Personal"})," ",Object(h.jsx)("input",{type:"checkbox",name:"type",onClick:function(){return O(1)}})]}),Object(h.jsx)("div",{className:"user-img-upload",children:Object(h.jsxs)("section",{className:"flex",children:[Object(h.jsxs)("label",{className:"login-text",htmlFor:"profilepic",children:["Profilbild:"," "]}),Object(h.jsx)("input",{className:"file-upload",name:"image",type:"file",src:"",alt:"",onChange:function(e){console.log(e.target.files[0]),N(e.target.files[0])}})]})}),Object(h.jsx)("div",{children:y}),Object(h.jsx)("button",{className:"login-btn",onClick:function(){return P()},children:"Skapa"})]})]})},g=function(e){var t=e.setLoggedIn,n=(e.theme,e.setTheme,e.setPage),s=e.setUser,c=Object(o.useState)("login"),r=Object(d.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)(!1),u=Object(d.a)(l,2),j=u[0];u[1];return j?Object(h.jsx)("h3",{children:"loading .."}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b,{condition:"login"===a,children:Object(h.jsx)(x,{setLoggedIn:t,setMainState:i,setPage:n,setUser:s})}),Object(h.jsx)(b,{condition:"signup"===a,children:Object(h.jsx)(f,{setLoggedIn:t,setMainState:i,setPage:n,setUser:s})})]})},w=n(8),v=function(e){var t=e.split("-");return t[1].split(" ")[0]===(new Date).getFullYear().toString().slice(2)?t[0]+" "+t[1].split(" ")[1]:e},C=function(){var e=(new Date).toLocaleDateString().split("-"),t=e[0].at(-2)+e[0].at(-1);if(0===e[1].at(0)&&0===e[2].at(0)){var n=e[2],s=e[1];e="".concat(n[1],"/").concat(s[1])}else if(0===e[1].at(0)){var c=e[1];e="".concat(e[2],"/").concat(c[1])}else if(0===e[2].at(0)){var o=e[2];e="".concat(o[1],"/").concat(e[1])}else e="".concat(e[2],"/").concat(e[1]);"0"===e.at(0)&&(e=e.slice(1));var r=(new Date).toLocaleTimeString().split(":");return e+"-"+t+" "+(r[0]+":"+r[1])},_=function(e){var t=e.chosenPost;console.log(t);var n=Object(o.useContext)(J).dispatch,s=Object(o.useContext)(B).user,c=Object(o.useState)(""),r=Object(d.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)(null),b=Object(d.a)(l,2),p=b[0],m=b[1],x=function(){var e=Object(j.a)(u.a.mark((function e(){var n,c,o,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a){e.next=2;break}return e.abrupt("return");case 2:return n=t.hashtags.map((function(e){return e.hashtag_id})),c=t.comments.some((function(e){return e.user_id===s.user_id}))||t.post.user_id===s.user_id?1:0,o=new FormData,console.log(p),o.append("post_id",t.post.post_id),o.append("user_id",s.user_id),o.append("text",a),o.append("time",C()),o.append("hashtags",JSON.stringify(n)),o.append("noInteractionUpd",c),o.append("image",p),e.next=15,fetch("http://localhost:8080/comment/create_comment",{method:"POST",body:o});case 15:return r=[],t.comments.length<1?r.push(t.user.user_id):t.comments.map((function(e){e.user_id===s.user_id||r.includes(e.user_id)||r.push(e.user_id)})),console.log(r),e.next=20,O("/notification/create_notification",{time:C(),post_id:t.post.post_id,comment_id:"null",type:2,notiUsers:r,post_user:t.user.user_id,origin:t.post.post_id});case 20:i=e.sent,console.log(i);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("h5",{onClick:function(){n({type:"showPostView"})},children:[Object(h.jsx)("span",{children:"pil"}),Object(h.jsx)("span",{children:"cancel"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"",children:"upload img: "}),Object(h.jsx)("input",{type:"file",name:"image",onChange:function(e){console.log(e.target.files[0]),m(e.target.files[0])}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"What are you thinking..?",onChange:function(e){return i(e.target.value)}}),Object(h.jsx)("button",{onClick:function(){return x()},children:"send"})]})]})},N=n(9),k=function(e){var t=e.reactions,n=e.fetchLike,s=Object(o.useContext)(B).user;return Object(h.jsx)("div",{className:"flex reactions",children:[0,1,2].map((function(e){return Object(h.jsxs)("span",{className:"flex noshow-com",onClick:function(){t.some((function(e){return e.user_id===s.user_id}))||n(1,e)},children:[Object(h.jsx)("span",{className:"noshow-com ".concat(t.filter((function(t){return t.reaction==="".concat(e)})).some((function(e){return e.user_id===s.user_id}))?"picked":""),children:":D"}),Object(h.jsx)("span",{className:"noshow-com",children:t.filter((function(t){return t.reaction==="".concat(e)})).length})]})}))})},S=function(e){var t=e.show,n=Object(o.useContext)(J).dispatch;return Object(h.jsx)("section",{className:"menu-header",children:Object(h.jsxs)("h5",{onClick:function(){return n({type:t})},children:[Object(h.jsx)("span",{children:Object(h.jsx)("i",{class:"fas fa-arrow-left"})}),Object(h.jsx)("span",{className:"menu-header-text",children:"tillbaka"})]})})},y=Object(N.a)("div")(s||(s=Object(w.a)(["\n  background-image: url(./static/media/",");\n"])),(function(e){return e.img})),P=function(e){var t=e.post,n=e.chosenPost,s=e.setChosenPost;console.log(t.post.user_id);var c=Object(o.useContext)(J).dispatch,r=Object(o.useContext)(B).user,a=t.reactions.filter((function(e){return"0"===e.type&&e.post_id})),i=t.reactions.filter((function(e){return"1"===e.type&&e.post_id})),l=Object(o.useState)(!1),p=Object(d.a)(l,2),x=p[0],f=p[1],g=Object(o.useState)(!1),w=Object(d.a)(g,2),_=w[0],N=(w[1],function(){var e=Object(j.a)(u.a.mark((function e(n,s){var c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.next=3,O("/reaction/create_reaction",{post_id:t.post.post_id,user_id:r.user_id,type:n,comment_id:"null",reaction:s,hashtags:t.hashtags});case 3:return c=e.sent,console.log(c),e.next=7,O("/notification/create_notification",{time:C(),post_id:t.post.post_id,comment_id:"null",type:0,notiUsers:[t.post.user_id],origin:t.post.post_id,post_user:t.post.user_id});case 7:o=e.sent,console.log(o);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),P=function(){var e=Object(j.a)(u.a.mark((function e(){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,m("/post/delete_post/?id=".concat(t.post.post_id),n.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return n.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,m("/hashtags/get_certain_hashtags/?hashtag=".concat(t),n.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return n.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return _?Object(h.jsx)("h3",{children:"loading .."}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b,{condition:n,children:Object(h.jsx)("div",{onClick:function(){s(null)},children:Object(h.jsx)(S,{show:"showPosts"})})}),Object(h.jsxs)("section",{className:"flex single-post",onClick:function(e){},children:[Object(h.jsxs)("div",{className:"author-img-container",children:[Object(h.jsx)(y,{img:t.user.image,className:"author-img"}),Object(h.jsx)(b,{condition:n&&t.comments.length>0,children:Object(h.jsxs)("div",{className:"comment-line",children:[Object(h.jsx)("div",{className:"line"}),Object(h.jsx)("div",{className:"corner"})]})})]}),Object(h.jsxs)("div",{className:"w100",children:[Object(h.jsxs)("div",{className:"flex JC-SB post-top",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{className:"author-username",children:t.user.name}),Object(h.jsx)("span",{className:"post-timestamp",children:v(t.post.time)})]}),Object(h.jsxs)("div",{className:"flex noshow-com likes",children:[Object(h.jsx)(b,{condition:t.post.user_id===r.user_id,children:Object(h.jsx)("div",{onClick:function(){P()},children:"delete"})}),Object(h.jsx)(b,{condition:!a.some((function(e){return e.user_id===r.user_id}))&&t.post.user_id!==r.user_id,children:Object(h.jsx)("span",{className:"noshow-com",onClick:function(){N(0,0)},children:"LIKEIT"})}),Object(h.jsx)("span",{className:"noshow-com likes-number",children:a.length}),Object(h.jsx)("span",{className:"noshow-com likes-svg"})]})]}),Object(h.jsxs)("div",{className:"post-content",children:[Object(h.jsx)("p",{className:"post-text-content",children:t.post.text}),Object(h.jsx)(b,{condition:t.post.image,children:Object(h.jsx)(y,{img:t.post.image,className:"post-pic"})})]}),Object(h.jsxs)("div",{className:"flex JC-SB post-bot",children:[Object(h.jsx)("div",{className:"flex FW-wrap",children:t.hashtags.map((function(e){return Object(h.jsx)("span",{onClick:function(){return L(e.content.slice(1))},className:"noshow-com post-hashtag ".concat(e.searched?"searched":""),children:e.content})}))}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsxs)(b,{condition:!n,children:[Object(h.jsx)("span",{className:"noshow-com",children:Object(h.jsx)("i",{class:"fas fa-comment"})}),Object(h.jsx)("span",{className:"comment-number",children:t.comments.length})]}),Object(h.jsx)("span",{className:"noshow-com",onClick:function(){t.post.user_id!==r.user_id&&f(!x)},children:Object(h.jsx)("i",{className:"fas fa-smile noshow-com"})}),Object(h.jsxs)("span",{className:"reaction-number",children:[i.length,Object(h.jsx)(b,{condition:x,children:Object(h.jsx)(k,{reactions:i,fetchLike:N})})]})]})]})]})]}),Object(h.jsx)(b,{condition:n,children:t.comments.map((function(e,n){return console.log(e),Object(h.jsx)(F,{user:r,comment:e,index:n,length:t.comments.length-1,postHashtags:t.hashtags})}))}),Object(h.jsx)(b,{condition:n,children:Object(h.jsx)("div",{onClick:function(){c({type:"showWriteComment"})},children:"comment"})})]})},F=function(e){var t=e.user,n=e.comment,s=e.index,c=e.length,r=(e.postHashtags,Object(o.useState)(!1)),a=Object(d.a)(r,2),i=a[0],l=a[1],p=n.reactions.filter((function(e){return"0"===e.type&&e.comment_id})),x=n.reactions.filter((function(e){return"1"===e.type&&e.comment_id})),f=function(){var e=Object(j.a)(u.a.mark((function e(s,c){var o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/reaction/create_reaction",{post_id:"null",user_id:t.user_id,type:s,reaction:c,comment_id:n.comment_id,hashtags:[]});case 2:return o=e.sent,console.log(o),e.next=6,O("/notification/create_notification",{time:C(),post_id:"null",comment_id:n.comment_id,type:1,notiUsers:[n.user_id],origin:n.post_id,post_user:!1});case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(u.a.mark((function e(){var t,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,m("/comment/delete_comment/?id=".concat(n.comment_id),t.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return t.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("section",{className:"flex comment-container",children:[Object(h.jsxs)("div",{className:"comment-img-container",children:[Object(h.jsx)(y,{img:n.image,className:"commentator-user-img"}),Object(h.jsx)(b,{condition:s!==c,children:Object(h.jsx)("div",{className:"comment-line",children:Object(h.jsx)("div",{className:"line",children:" "})})})]}),Object(h.jsxs)("div",{className:"w100",children:[Object(h.jsxs)("div",{className:"flex JC-SB comment-top",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("span",{className:"commentator-username",children:n.name}),Object(h.jsx)("span",{className:"comment-timestamp",children:v(n.time)})]}),Object(h.jsxs)("div",{className:"flex noshow-com likes",children:[Object(h.jsx)(b,{condition:n.user_id===t.user_id,children:Object(h.jsx)("div",{onClick:function(){g()},children:"delete"})}),Object(h.jsx)(b,{condition:!p.some((function(e){return e.user_id===t.user_id}))&&n.user_id!==t.user_id,children:Object(h.jsx)("span",{className:"noshow-com",onClick:function(){f(0,0)},children:"LIKEIT"})}),Object(h.jsx)("span",{className:"noshow-com likes-number",children:p.length}),Object(h.jsx)("span",{className:"noshow-com likes-svg"})]})]}),Object(h.jsxs)("div",{className:"comment-content",children:[Object(h.jsx)("p",{children:n.text}),Object(h.jsx)(b,{condition:n.comment_image,children:Object(h.jsx)(y,{img:n.comment_image,className:"post-pic"})})]}),Object(h.jsxs)("div",{className:"flex JC-E comment-bot",children:[Object(h.jsx)("span",{onClick:function(){n.user_id!==t.user_id&&l(!i)},children:Object(h.jsx)("i",{class:"fas fa-smile"})}),Object(h.jsxs)("span",{className:"reaction-number",children:[x.length,Object(h.jsx)(b,{condition:i,children:Object(h.jsx)(k,{reactions:x,fetchLike:f})})]})]})]})]})},L=n(6),W=n(18),A=function(e){Object(W.a)(e);Object(o.useContext)(J).dispatch;var t=Object(o.useContext)(B).user,n=Object(o.useState)(""),s=Object(d.a)(n,2),c=s[0],r=s[1],a=Object(o.useState)([]),i=Object(d.a)(a,2),l=i[0],p=i[1],O=Object(o.useState)(""),x=Object(d.a)(O,2),f=x[0],g=x[1],w=Object(o.useState)([]),v=Object(d.a)(w,2),_=v[0],N=v[1],k=Object(o.useState)(null),y=Object(d.a)(k,2),P=y[0],F=y[1],A=function(){var e=Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==c){e.next=2;break}return e.abrupt("return");case 2:return n=new FormData,console.log(JSON.stringify(l)),n.append("user_id",t.user_id),n.append("text",c),n.append("time",C()),n.append("hashtags",JSON.stringify(l)),n.append("image",P),e.next=11,fetch("http://localhost:8080/post/create_post",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,m("/hashtag/get_certain_hashtags/?input=".concat(f),t.signal);case 3:return n=e.sent,console.log(n),N(n.hashtags),e.abrupt("return",(function(){return t.abort()}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("section",{className:"menu-container",children:[Object(h.jsx)(S,{show:"showPosts"}),Object(h.jsxs)("section",{className:"write-post-container",children:[Object(h.jsx)("div",{children:Object(h.jsx)("textarea",{className:"write-post",name:"",id:"",cols:"30",rows:"8",placeholder:"What are you thinking..?",onChange:function(e){return r(e.target.value)}})}),Object(h.jsxs)("div",{className:"flex JC-SB write-post-bot",children:[Object(h.jsx)("input",{className:"file-upload write-post-file",type:"file",name:"image",onChange:function(e){console.log(e.target.files[0]),F(e.target.files[0])}}),Object(h.jsx)("div",{})]}),Object(h.jsx)("div",{className:"flex send-container",children:Object(h.jsx)("button",{className:"send-post-btn",onClick:function(){return A()},children:Object(h.jsx)("i",{class:"fas fa-pencil-alt"})})}),Object(h.jsxs)("section",{className:"flex",children:[Object(h.jsx)("div",{onClick:function(e){console.log(l),l.includes(e.target.textContent)||p((function(t){return[].concat(Object(L.a)(t),[e.target.textContent])}))},children:"#Deltagare"}),Object(h.jsx)("div",{onClick:function(e){console.log(l),l.includes(e.target.textContent)||p((function(t){return[].concat(Object(L.a)(t),[e.target.textContent])}))},children:"#Skola"})]}),Object(h.jsx)("div",{children:"Hashtag:"}),Object(h.jsxs)("section",{className:"flex",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"text",name:"",onChange:function(e){return g(e.target.value)}}),Object(h.jsx)("button",{onClick:function(){return D()},children:"s\xf6k"}),Object(h.jsx)("button",{onClick:function(){l.includes("#"+f)||p((function(e){return[].concat(Object(L.a)(e),["#"+f])}))},children:"add"})]}),Object(h.jsx)("div",{className:"flex FW-wrap",children:l.map((function(e,t){return console.log(e),Object(h.jsx)("div",{onClick:function(){p(l.filter((function(t){return t!==e})))},children:e},t)}))})]}),Object(h.jsx)(b,{condition:0!==_.length,children:_.map((function(e,t){return Object(h.jsx)("div",{onClick:function(){l.includes(e.content)||p((function(t){return[].concat(Object(L.a)(t),[e.content])}))},children:e.content},t)}))})]})]})})},D=function(e){var t=e.setCertainPosts,n=e.setPostFilter,s=Object(o.useContext)(J).dispatch,c=Object(o.useState)(""),r=Object(d.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)([]),p=Object(d.a)(l,2),O=p[0],x=p[1],f=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,m("/hashtag/get_certain_hashtags/?input=".concat(a),t.signal);case 3:return n=e.sent,console.log(n),x(n.hashtags),e.abrupt("return",(function(){return t.abort()}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(u.a.mark((function e(n){var c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new AbortController,e.next=3,m("/post/get_certain_posts_data/?input=".concat(n),c.signal);case 3:return o=e.sent,console.log(o),t(o),s({type:"showPosts"}),e.abrupt("return",(function(){return c.abort()}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("section",{className:"menu-container",children:[Object(h.jsx)(S,{show:"showPosts"}),Object(h.jsx)("input",{type:"text",name:"",onChange:function(e){return i(e.target.value)}}),Object(h.jsx)("button",{onClick:function(){return f()},children:"s\xf6k"}),Object(h.jsx)(b,{condition:0!==O.length,children:O.map((function(e,t){return Object(h.jsx)("div",{onClick:function(){n(e.content),g(e.content.slice(1))},children:e.content},t)}))})]})})},T=function(e){var t=e.setShowSettings,n=Object(o.useContext)(B).user,s=Object(o.useState)(null),c=Object(d.a)(s,2),r=c[0],a=c[1],i=Object(o.useState)(null),l=Object(d.a)(i,2),b=l[0],p=l[1],m=Object(o.useState)(null),O=Object(d.a)(m,2),x=O[0],f=O[1],g=Object(o.useState)("temp"),w=Object(d.a)(g,2),v=w[0],C=(w[1],function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",x),t.append("user_id",n.user_id),t.append("current_password",r),t.append("new_password",b),e.next=7,fetch("/user/user_update",{method:"POST",body:t});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(h.jsxs)("section",{className:"menu-container",children:[Object(h.jsx)("section",{className:"menu-header",children:Object(h.jsxs)("h5",{onClick:function(){return t(!1)},children:[Object(h.jsx)("span",{children:Object(h.jsx)("i",{class:"fas fa-arrow-left"})}),Object(h.jsx)("span",{className:"menu-header-text",children:"tillbaka"})]})}),Object(h.jsx)("h4",{children:"Change password:"}),Object(h.jsxs)("div",{className:"flex FD-C",children:[Object(h.jsx)("label",{htmlFor:"",children:"current:"}),Object(h.jsx)("input",{type:"password",name:"",onChange:function(e){return a(e.target.value)}})]}),Object(h.jsxs)("div",{className:"flex FD-C",children:[Object(h.jsx)("label",{htmlFor:"",children:"new:"}),Object(h.jsx)("input",{type:"password",name:"",onChange:function(e){return p(e.target.value)}})]}),Object(h.jsx)("h4",{children:"Change pic:"}),Object(h.jsx)("input",{className:"file-upload",name:"image",type:"file",src:"",alt:"",onChange:function(e){console.log(e.target.files[0]),console.log(void 0===e.target.files[0]),f(e.target.files[0])}}),Object(h.jsx)("div",{onClick:function(){C()},children:"save"}),Object(h.jsx)("div",{children:v})]})},I=function(e){var t=e.setLoggedIn,n=(Object(o.useContext)(J).dispatch,Object(o.useContext)(B).user,Object(o.useState)(!1)),s=Object(d.a)(n,2),c=s[0],r=s[1],a=function(){var e=Object(j.a)(u.a.mark((function e(){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,m("/user/user_logout",n.signal);case 3:return s=e.sent,console.log(s),t(!1),e.abrupt("return",(function(){return n.abort()}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(b,{condition:!c,children:Object(h.jsxs)("section",{className:"menu-container",children:[Object(h.jsx)(S,{show:"showPosts"}),Object(h.jsxs)("section",{children:[Object(h.jsx)("div",{onClick:function(){a()},children:"logout"}),Object(h.jsx)("div",{onClick:function(){r(!0)},children:"settings"})]})]})}),Object(h.jsx)(b,{condition:c,children:Object(h.jsx)(T,{setShowSettings:r})})]})},V=function(e){var t=e.notifications,n=e.setChosenPost,s=Object(o.useState)(!1),c=Object(d.a)(s,2),r=c[0],a=(c[1],Object(o.useContext)(B).user,Object(o.useContext)(J).dispatch),i=function(e){return"0"===e.type?"".concat(e.NrOfDub," ").concat(e.NrOfDub>1?"nya interaktioner":"ny interaktion",' p\xe5 din post "').concat(e.text.slice(0,10)).concat(e.text.length>10?"...":"",'"'):"1"===e.type?"".concat(e.NrOfDub," ").concat(e.NrOfDub>1?"nya interaktioner":"ny interaktion",' p\xe5 din kommentar "').concat(e.text.slice(0,10)).concat(e.text.length>10?"...":"",'" till ').concat(e.post.name,'s post "').concat(e.post.text.slice(0,10)).concat(e.text.length>10?"...":"",'"'):"Andra\n      har ocks\xe5 kommenterat p\xe5 ".concat(e.post.name,'s post "').concat(e.text.slice(0,10)).concat(e.text.length>10?"...":"",'"')},l=function(){var e=Object(j.a)(u.a.mark((function e(t,s,c,o){var r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new AbortController,e.next=3,m("/post/get_post_data_and_delete_noti/?id=".concat(t,"&compost=").concat(s,"&compost_id=").concat(c,"&type=").concat(o),r.signal);case 3:return i=e.sent,console.log(i),n(i[0]),a({type:"showPostView"}),e.abrupt("return",(function(){return r.abort()}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,s,c){return e.apply(this,arguments)}}();return r?Object(h.jsx)("h3",{children:"loading .."}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(S,{show:"showPosts"}),Object(h.jsx)("section",{children:t.map((function(e){return Object(h.jsx)("div",{onClick:function(){l(e.origin,e.post_id?"post_id":"comment_id",e.post_id?e.post_id:e.comment_id,e.type)},children:Object(h.jsx)("div",{children:i(e)})})}))})]})},M=Object(N.a)("div")(c||(c=Object(w.a)(["\n  background-image: url(./static/media/",");\n"])),(function(e){return e.img})),J=Object(o.createContext)(null),E=function(e,t){switch(t.type){case"showPosts":return{showPosts:!0,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1};case"showMenu":return{showPosts:!1,showMenu:!0,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1};case"showSearch":return{showPosts:!1,showMenu:!1,showSearch:!0,showPostView:!1,showWritePost:!1,showWriteComment:!1};case"showPostView":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!0,showWritePost:!1,showWriteComment:!1};case"showWritePost":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!0,showWriteComment:!1};case"showWriteComment":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!0};case"showNotifications":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1,showNotifications:!0}}},U=function(e){var t=e.setLoggedIn,n=e.theme,s=e.setTheme,c=Object(o.useState)(null),r=Object(d.a)(c,2),a=(r[0],r[1],Object(o.useState)([])),i=Object(d.a)(a,2),l=i[0],p=i[1],O=Object(o.useContext)(B).user,x=Object(o.useReducer)(E,{showPosts:!0,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1,showNotifications:!1}),f=Object(d.a)(x,2),g=f[0],w=f[1],v=Object(o.useState)(0),C=Object(d.a)(v,2),N=C[0],k=C[1],S=Object(o.useState)(!1),y=Object(d.a)(S,2),F=y[0],L=y[1],W=Object(o.useState)(!1),T=Object(d.a)(W,2),U=T[0],H=T[1],K=Object(o.useState)(null),q=Object(d.a)(K,2),G=q[0],R=q[1],Y=Object(o.useState)([]),z=Object(d.a)(Y,2),Q=z[0],X=z[1],Z=Object(o.useState)("ALL"),$=Object(d.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.useState)([]),se=Object(d.a)(ne,2),ce=se[0],oe=se[1],re=Object(o.useState)([]),ae=Object(d.a)(re,2),ie=ae[0],le=ae[1],ue=Object(o.useState)(!0),je=Object(d.a)(ue,2),de=je[0],he=je[1],be=Object(o.useState)(!1),pe=Object(d.a)(be,2),me=pe[0],Oe=pe[1],xe=Object(o.useState)([]),fe=Object(d.a)(xe,2),ge=fe[0],we=fe[1],ve=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,m("/post/get_certain_posts_data/?input=".concat(t),n.signal);case 3:return s=e.sent,console.log(s),le(s.reverse()),e.abrupt("return",(function(){return n.abort()}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/post/get_posts_data/?page=".concat(N),t);case 2:n=e.sent,console.log(n[1].nextPage),oe(n[0].posts),n[1].nextPage?L(!0):L(!1),he(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,s=ce.concat(l),oe(s),e.next=5,m("/post/get_posts_data/?page=".concat(t),n.signal);case 5:return c=e.sent,console.log(c[1].nextPage),p(c[0].posts),console.log(ce),c[1].nextPage?L(!0):L(!1),Oe(!1),e.abrupt("return",(function(){return n.abort()}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/hashtag/get_user_main_hashtags/?user_id=".concat(O.user_id),t);case 2:n=e.sent,console.log(n),X(n.main_hashtags);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/notification/get_user_notifications/?user=".concat(O.user_id),t);case 2:n=e.sent,console.log(n.notifications),we(n.notifications);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=Object(o.useCallback)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,Ne(t.signal);case 3:return e.next=5,ke(t.signal);case 5:return e.next=7,Ce(t.signal);case 7:return e.abrupt("return",(function(){return t.abort()}));case 8:case"end":return e.stop()}}),e)}))),[]);return Object(o.useEffect)(Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FETCHED ALL"),e.next=3,Se();case 3:case"end":return e.stop()}}),e)}))),[Se]),Object(o.useEffect)((function(){de||me||document.querySelector(".last").scrollIntoView()}),[me]),de?Object(h.jsx)("h3",{children:"loading .."}):Object(h.jsxs)(J.Provider,{value:{showState:g,dispatch:w},children:[Object(h.jsxs)(b,{condition:g.showPosts,children:[Object(h.jsxs)("header",{className:"flex JC-SB header",children:[Object(h.jsx)(M,{img:O.image,className:"header-user-img"}),Object(h.jsx)("div",{className:"header-stars",onClick:function(){return s(!n)}})]}),Object(h.jsx)("section",{children:Object(h.jsxs)("section",{className:"top-btns flex JC-C",children:[Object(h.jsx)("div",{className:"menu-btn flex",onClick:function(){w({type:"showMenu"})},children:Object(h.jsx)("i",{class:"fas fa-bars"})}),Object(h.jsx)("div",{className:"write-post-btn flex",onClick:function(){w({type:"showWritePost"})},children:Object(h.jsx)("i",{class:"fas fa-pencil-alt"})}),Object(h.jsx)("div",{className:"search-btn flex",onClick:function(){w({type:"showSearch"})},children:Object(h.jsx)("i",{class:"fas fa-search"})})]})}),Object(h.jsxs)("section",{className:"container",children:[Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("div",{className:"ALL"===ee?"filter":"",onClick:function(){te("ALL"),le([])},children:"ALL"}),Q.map((function(e){return Object(h.jsx)("div",{className:ee===e.content?"filter":"",onClick:function(){te(e.content),ve(e.content.slice(1))},children:e.content})}))]}),Object(h.jsx)("div",{onClick:function(){he(!0),H(!U)},children:"update"}),Object(h.jsxs)("div",{onClick:function(){w({type:"showNotifications"})},children:["noti ",ge.length]}),Object(h.jsxs)("div",{className:"posts",children:[Object(h.jsx)(b,{condition:me,children:Object(h.jsx)("div",{children:"small load"})}),Object(h.jsxs)(b,{condition:ie.length<1&&!me,children:[ce.map((function(e,t){return console.log(t,ce.length),Object(h.jsx)("div",{className:"".concat(t+1===ce.length?"last":""),onClick:function(t){t.target.classList.value.includes("noshow-com")||(R(e),w({type:"showPostView"}))},children:Object(h.jsx)(P,{post:e,chosenPost:G},t)})})),Object(h.jsx)(b,{condition:me,children:Object(h.jsx)("div",{children:"small load"})}),Object(h.jsx)(b,{condition:l.length>0&&!me,children:l.map((function(e,t){return Object(h.jsx)("div",{className:"post".concat(t),onClick:function(t){t.target.classList.value.includes("noshow-com")||(R(e),w({type:"showPostView"}))},children:Object(h.jsx)(P,{post:e,chosenPost:G},t)})}))}),Object(h.jsx)(b,{condition:F,children:Object(h.jsx)("div",{onClick:function(e){console.log(e.target.offsetTop),Oe(!0),k(N+1),_e(N+1)},children:"next page"})})]}),Object(h.jsx)(b,{condition:ie,children:ie.map((function(e,t){return console.log(e),Object(h.jsx)("div",{onClick:function(t){console.log(t.target),t.target.classList.value.includes("noshow-com")&&console.log("noshow"),R(e),w({type:"showPostView"})},children:Object(h.jsx)(P,{post:e,chosenPost:G,user:O},t)})}))})]})]})]}),Object(h.jsx)(b,{condition:g.showWritePost,children:Object(h.jsx)(A,{user:O})}),Object(h.jsx)(b,{condition:g.showSearch,children:Object(h.jsx)(D,{setPosts:oe,setCertainPosts:le,setPostFilter:te})}),Object(h.jsx)(b,{condition:g.showMenu,children:Object(h.jsx)(I,{user:O,setLoggedIn:t})}),Object(h.jsx)(b,{condition:g.showPostView,children:Object(h.jsx)("section",{className:"container",children:Object(h.jsx)("div",{className:"posts",children:Object(h.jsx)(P,{post:G,chosenPost:G,setChosenPost:R,user:O})})})}),Object(h.jsx)(b,{condition:g.showWriteComment,children:Object(h.jsx)(_,{chosenPost:G})}),Object(h.jsx)(b,{condition:g.showNotifications,children:Object(h.jsx)(V,{notifications:ge,setChosenPost:R})})]})},B=Object(o.createContext)(null);var H=function(){var e=Object(o.useState)("home"),t=Object(d.a)(e,2),n=(t[0],t[1]),s=Object(o.useState)(null),c=Object(d.a)(s,2),r=c[0],a=c[1],i=Object(o.useState)(!0),l=Object(d.a)(i,2),p=l[0],O=l[1],x=Object(o.useState)(!1),f=Object(d.a)(x,2),w=f[0],v=f[1],C=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/user/is_loggedin",t);case 2:n=e.sent,console.log(n),n.fail?v(!1):(a(n.user),v(!0));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,C(t.signal);case 3:return e.abrupt("return",(function(){return t.abort()}));case 4:case"end":return e.stop()}}),e)}))),[]),Object(h.jsx)("div",{className:"App ".concat(p?"light":"dark"),children:Object(h.jsxs)(B.Provider,{value:{user:r},children:[Object(h.jsx)(b,{condition:!w,children:Object(h.jsx)(g,{setLoggedIn:v,theme:p,setTheme:O,setPage:n,setUser:a})}),Object(h.jsx)(b,{condition:w,children:Object(h.jsx)(U,{setLoggedIn:v,theme:p,setTheme:O,setPage:n})})]})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),o(e),r(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(H,{})}),document.getElementById("root")),K()}},[[32,1,2]]]);