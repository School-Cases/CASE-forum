(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{22:function(e,t,n){},25:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var s,c,r,o=n(1),a=n.n(o),i=n(14),l=n.n(i),u=(n(22),n(2)),j=n.n(u),d=n(4),h=n(3),m=(n(24),n(25),"http://localhost:8080"),b=function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(m+t,{method:"GET",signal:n,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,fetch(m+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=n(0),O=function(e){var t=e.setTheme,n=e.setLoggedIn,s=e.setSignup,c=e.setUser,r=Object(o.useState)(null),a=Object(h.a)(r,2),i=a[0],l=a[1],u=Object(o.useState)(null),m=Object(h.a)(u,2),b=m[0],O=m[1],f=Object(o.useState)(null),g=Object(h.a)(f,2),w=g[0],v=g[1],_=function(){var e=Object(d.a)(j.a.mark((function e(){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/user/user_login",{name:i,password:b});case 2:(s=e.sent).fail?v(s.fail):(c(s),t(parseInt(s.theme)),n(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{className:"flex login-top",children:Object(x.jsx)("div",{className:"glimra-logo"})}),Object(x.jsxs)("section",{className:"flex login-container",children:[Object(x.jsx)("h2",{className:"login-welcome",children:"V\xe4lkommen!"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"login-text",htmlFor:"namn",children:"namn:"}),Object(x.jsx)("input",{className:"login-input",type:"text",name:"",placeholder:"namn",onChange:function(e){return l(e.target.value)}})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"login-text",htmlFor:"password",children:"l\xf6senord:"}),Object(x.jsx)("input",{className:"login-input",type:"password",name:"",placeholder:"l\xf6senord",onChange:function(e){return O(e.target.value)}})]}),Object(x.jsx)("div",{children:w}),Object(x.jsx)("button",{className:"login-btn",onClick:function(){return _()},children:"logga in"}),Object(x.jsxs)("div",{className:"login-create-user",children:["Ny anv\xe4ndare?"," ",Object(x.jsx)("span",{className:"create-user-link",onClick:function(){return s(!0)},children:"skapa konto"})]}),Object(x.jsx)("div",{className:"login-tree"})]})]})},f=function(e){var t=e.setLoggedIn,n=e.setSignup,s=e.setUser,c=Object(o.useState)(null),r=Object(h.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)("test@test.com"),u=Object(h.a)(l,2),m=u[0],b=(u[1],Object(o.useState)(null)),p=Object(h.a)(b,2),O=p[0],f=p[1],g=Object(o.useState)(null),w=Object(h.a)(g,2),v=w[0],_=w[1],N=Object(o.useState)(null),C=Object(h.a)(N,2),k=C[0],y=C[1],S=Object(o.useState)(null),P=Object(h.a)(S,2),F=P[0],L=P[1],W=function(){var e=Object(d.a)(j.a.mark((function e(){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||null===O||!v){e.next=12;break}return(n=new FormData).append("image",k),n.append("name",a),n.append("password",v),n.append("email",m),n.append("type",O),e.next=9,fetch("http://localhost:8080/user/create_user",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return c=e}));case 9:c.fail?console.log("failed"):(console.log("success"),s(c),t(!0)),e.next=13;break;case 12:L("try again");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{className:"flex login-top",children:Object(x.jsx)("div",{className:"glimra-logo"})}),Object(x.jsxs)("section",{className:"flex login-container",children:[Object(x.jsxs)("section",{className:"flex JC-SB heading",children:[Object(x.jsx)("span",{className:"back-arrow login-welcome",onClick:function(){return n(!1)},children:Object(x.jsx)("i",{class:"fas fa-arrow-left"})}),Object(x.jsx)("span",{className:"login-welcome",children:"Skapa konto"}),Object(x.jsx)("span",{})]}),Object(x.jsx)("input",{hidden:!0,className:"login-input",type:"text",name:"email",placeholder:"name",value:m}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("label",{className:"login-text",htmlFor:"",children:["name:"," "]}),Object(x.jsx)("input",{className:"login-input",type:"text",name:"name",placeholder:"name",onChange:function(e){return i(e.target.value)}})]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("label",{className:"login-text",htmlFor:"password",children:["password:"," "]}),Object(x.jsx)("input",{className:"login-input",type:"password",name:"password",placeholder:"password",onChange:function(e){return _(e.target.value)}})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"login-text",htmlFor:"",children:"Deltagare"})," ",Object(x.jsx)("input",{type:"radio",name:"type",onClick:function(e){return f(0)}}),Object(x.jsx)("label",{className:"login-text",htmlFor:"",children:"Personal"})," ",Object(x.jsx)("input",{type:"radio",name:"type",onClick:function(e){return f(1)}})]}),Object(x.jsx)("div",{className:"user-img-upload",children:Object(x.jsxs)("section",{className:"flex",children:[Object(x.jsxs)("label",{className:"login-text",htmlFor:"profilepic",children:["Profilbild:"," "]}),Object(x.jsx)("input",{className:"file-upload",name:"image",type:"file",src:"",alt:"",onChange:function(e){return y(e.target.files[0])}})]})}),Object(x.jsx)("div",{children:F}),Object(x.jsx)("button",{className:"login-btn",onClick:function(){return W()},children:"Skapa"})]})]})},g=function(e){var t=e.condition,n=e.children;return Object(x.jsx)(x.Fragment,{children:t&&n})},w=function(e){var t=e.setLoggedIn,n=e.setTheme,s=e.setUser,c=Object(o.useState)(!1),r=Object(h.a)(c,2),a=r[0],i=r[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{condition:!a,children:Object(x.jsx)(O,{setLoggedIn:t,setSignup:i,setUser:s,setTheme:n})}),Object(x.jsx)(g,{condition:a,children:Object(x.jsx)(f,{setLoggedIn:t,setSignup:i,setUser:s})})]})},v=n(5),_=n(6),N=Object(_.a)("div")(s||(s=Object(v.a)(["\n  background-image: url(./static/media/",");\n"])),(function(e){return e.img})),C=function(){var e=Object(o.useContext)(K).dispatch,t=Object(o.useContext)(R).user;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("header",{className:"flex JC-SB header",children:[Object(x.jsx)(N,{img:t.image,className:"header-user-img"}),Object(x.jsx)("div",{className:"header-stars"})]}),Object(x.jsx)("section",{children:Object(x.jsxs)("section",{className:"top-btns flex JC-C",children:[Object(x.jsx)("div",{className:"menu-btn flex",onClick:function(){e({type:"showMenu"})},children:Object(x.jsx)("i",{class:"fas fa-bars"})}),Object(x.jsx)("div",{className:"write-post-btn flex",onClick:function(){e({type:"showWritePost"})},children:Object(x.jsx)("i",{class:"fas fa-pencil-alt"})}),Object(x.jsx)("div",{className:"search-btn flex",onClick:function(){e({type:"showSearch"})},children:Object(x.jsx)("i",{class:"fas fa-search"})})]})})]})},k=function(e){var t=e.split("-");return t[1].split(" ")[0]===(new Date).getFullYear().toString().slice(2)?t[0]+" "+t[1].split(" ")[1]:e},y=function(){var e=(new Date).toLocaleDateString().split("-"),t=e[0].at(-2)+e[0].at(-1);if(0===e[1].at(0)&&0===e[2].at(0)){var n=e[2],s=e[1];e="".concat(n[1],"/").concat(s[1])}else if(0===e[1].at(0)){var c=e[1];e="".concat(e[2],"/").concat(c[1])}else if(0===e[2].at(0)){var r=e[2];e="".concat(r[1],"/").concat(e[1])}else e="".concat(e[2],"/").concat(e[1]);"0"===e.at(0)&&(e=e.slice(1));var o=(new Date).toLocaleTimeString().split(":");return e+"-"+t+" "+(o[0]+":"+o[1])},S=function(e){var t=e.chosenPost;console.log(t);var n=Object(o.useContext)(K).dispatch,s=Object(o.useContext)(R).user,c=Object(o.useState)(""),r=Object(h.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)(null),u=Object(h.a)(l,2),m=u[0],b=u[1],O=function(){var e=Object(d.a)(j.a.mark((function e(){var n,c,r,o,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a){e.next=2;break}return e.abrupt("return");case 2:return n=t.hashtags.map((function(e){return e.hashtag_id})),c=t.comments.some((function(e){return e.user_id===s.user_id}))||t.post.user_id===s.user_id?1:0,r=new FormData,console.log(m),r.append("post_id",t.post.post_id),r.append("user_id",s.user_id),r.append("text",a),r.append("time",y()),r.append("hashtags",JSON.stringify(n)),r.append("noInteractionUpd",c),r.append("image",m),e.next=15,fetch("http://localhost:8080/comment/create_comment",{method:"POST",body:r});case 15:return o=[],t.comments.length<1?o.push(t.user.user_id):t.comments.map((function(e){e.user_id===s.user_id||o.includes(e.user_id)||o.push(e.user_id)})),console.log(o),e.next=20,p("/notification/create_notification",{time:y(),post_id:t.post.post_id,comment_id:"null",type:2,notiUsers:o,post_user:t.user.user_id,origin:t.post.post_id});case 20:i=e.sent,console.log(i);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h5",{onClick:function(){n({type:"showPostView"})},children:[Object(x.jsx)("span",{children:"pil"}),Object(x.jsx)("span",{children:"cancel"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{htmlFor:"",children:"upload img: "}),Object(x.jsx)("input",{type:"file",name:"image",onChange:function(e){console.log(e.target.files[0]),b(e.target.files[0])}})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("textarea",{name:"",id:"",cols:"30",rows:"10",placeholder:"What are you thinking..?",onChange:function(e){return i(e.target.value)}}),Object(x.jsx)("button",{onClick:function(){return O()},children:"send"})]})]})},P=function(e){var t=e.reactions,n=e.fetchLike,s=Object(o.useContext)(R).user;return Object(x.jsx)("div",{className:"flex reactions",children:[0,1,2].map((function(e){return Object(x.jsxs)("span",{className:"flex noshow-com",onClick:function(){t.some((function(e){return e.user_id===s.user_id}))||n(1,e)},children:[Object(x.jsx)("span",{className:"noshow-com ".concat(t.filter((function(t){return t.reaction==="".concat(e)})).some((function(e){return e.user_id===s.user_id}))?"picked":""),children:":D"}),Object(x.jsx)("span",{className:"noshow-com",children:t.filter((function(t){return t.reaction==="".concat(e)})).length})]})}))})},F=function(e){var t=e.show,n=Object(o.useContext)(K).dispatch;return Object(x.jsx)("section",{className:"menu-header",children:Object(x.jsxs)("h5",{onClick:function(){return n({type:t})},children:[Object(x.jsx)("span",{children:Object(x.jsx)("i",{class:"fas fa-arrow-left"})}),Object(x.jsx)("span",{className:"menu-header-text",children:"tillbaka"})]})})},L=Object(_.a)("div")(c||(c=Object(v.a)(["\n  background-image: url(./static/media/",");\n"])),(function(e){return e.img})),W=function(e){var t=e.fetchCertainPosts,n=e.post,s=e.chosenPost,c=e.setChosenPost;console.log(n.post.user_id);var r=Object(o.useContext)(K).dispatch,a=Object(o.useContext)(R).user,i=n.reactions.filter((function(e){return"0"===e.type&&e.post_id})),l=n.reactions.filter((function(e){return"1"===e.type&&e.post_id})),u=Object(o.useState)(!1),m=Object(h.a)(u,2),O=m[0],f=m[1],w=Object(o.useState)(!1),v=Object(h.a)(w,2),_=v[0],N=(v[1],function(){var e=Object(d.a)(j.a.mark((function e(t,s){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.next=3,p("/reaction/create_reaction",{post_id:n.post.post_id,user_id:a.user_id,type:t,comment_id:"null",reaction:s,hashtags:n.hashtags});case 3:return c=e.sent,console.log(c),e.next=7,p("/notification/create_notification",{time:y(),post_id:n.post.post_id,comment_id:"null",type:0,notiUsers:[n.post.user_id],origin:n.post.post_id,post_user:n.post.user_id});case 7:r=e.sent,console.log(r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),C=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,b("/post/delete_post/?id=".concat(n.post.post_id),t.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return t.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _?Object(x.jsx)("h3",{children:"loading .."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{condition:s,children:Object(x.jsx)("div",{onClick:function(){c(null)},children:Object(x.jsx)(F,{show:"showPosts"})})}),Object(x.jsxs)("section",{className:"flex single-post",onClick:function(e){},children:[Object(x.jsxs)("div",{className:"author-img-container",children:[Object(x.jsx)(L,{img:n.user.image,className:"author-img"}),Object(x.jsx)(g,{condition:s&&n.comments.length>0,children:Object(x.jsxs)("div",{className:"comment-line",children:[Object(x.jsx)("div",{className:"line"}),Object(x.jsx)("div",{className:"corner"})]})})]}),Object(x.jsxs)("div",{className:"w100",children:[Object(x.jsxs)("div",{className:"flex JC-SB post-top",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"author-username",children:n.user.name}),Object(x.jsx)("span",{className:"post-timestamp",children:k(n.post.time)})]}),Object(x.jsxs)("div",{className:"flex noshow-com likes",children:[Object(x.jsx)(g,{condition:n.post.user_id===a.user_id,children:Object(x.jsx)("div",{onClick:function(){C()},children:"delete"})}),Object(x.jsx)(g,{condition:!i.some((function(e){return e.user_id===a.user_id}))&&n.post.user_id!==a.user_id,children:Object(x.jsx)("span",{className:"noshow-com",onClick:function(){N(0,0)},children:"LIKEIT"})}),Object(x.jsx)("span",{className:"noshow-com likes-number",children:i.length}),Object(x.jsx)("span",{className:"noshow-com likes-svg"})]})]}),Object(x.jsxs)("div",{className:"post-content",children:[Object(x.jsx)("p",{className:"post-text-content",children:n.post.text}),Object(x.jsx)(g,{condition:n.post.image,children:Object(x.jsx)(L,{img:n.post.image,className:"post-pic"})})]}),Object(x.jsxs)("div",{className:"flex JC-SB post-bot",children:[Object(x.jsx)("div",{className:"flex FW-wrap",children:n.hashtags.map((function(e){return Object(x.jsx)("span",{onClick:function(){return t(e.content.slice(1))},className:"noshow-com post-hashtag ".concat(e.searched?"searched":""),children:e.content})}))}),Object(x.jsxs)("div",{className:"flex",children:[Object(x.jsxs)(g,{condition:!s,children:[Object(x.jsx)("span",{className:"noshow-com",children:Object(x.jsx)("i",{class:"fas fa-comment"})}),Object(x.jsx)("span",{className:"comment-number",children:n.comments.length})]}),Object(x.jsx)("span",{className:"noshow-com",onClick:function(){n.post.user_id!==a.user_id&&f(!O)},children:Object(x.jsx)("i",{className:"fas fa-smile noshow-com"})}),Object(x.jsxs)("span",{className:"reaction-number",children:[l.length,Object(x.jsx)(g,{condition:O,children:Object(x.jsx)(P,{reactions:l,fetchLike:N})})]})]})]})]})]}),Object(x.jsx)(g,{condition:s,children:n.comments.map((function(e,t){return console.log(e),Object(x.jsx)(T,{user:a,comment:e,index:t,length:n.comments.length-1,postHashtags:n.hashtags})}))}),Object(x.jsx)(g,{condition:s,children:Object(x.jsx)("div",{onClick:function(){r({type:"showWriteComment"})},children:"comment"})})]})},T=function(e){var t=e.user,n=e.comment,s=e.index,c=e.length,r=(e.postHashtags,Object(o.useState)(!1)),a=Object(h.a)(r,2),i=a[0],l=a[1],u=n.reactions.filter((function(e){return"0"===e.type&&e.comment_id})),m=n.reactions.filter((function(e){return"1"===e.type&&e.comment_id})),O=function(){var e=Object(d.a)(j.a.mark((function e(s,c){var r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/reaction/create_reaction",{post_id:"null",user_id:t.user_id,type:s,reaction:c,comment_id:n.comment_id,hashtags:[]});case 2:return r=e.sent,console.log(r),e.next=6,p("/notification/create_notification",{time:y(),post_id:"null",comment_id:n.comment_id,type:1,notiUsers:[n.user_id],origin:n.post_id,post_user:!1});case 6:o=e.sent,console.log(o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,b("/comment/delete_comment/?id=".concat(n.comment_id),t.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return t.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("section",{className:"flex comment-container",children:[Object(x.jsxs)("div",{className:"comment-img-container",children:[Object(x.jsx)(L,{img:n.image,className:"commentator-user-img"}),Object(x.jsx)(g,{condition:s!==c,children:Object(x.jsx)("div",{className:"comment-line",children:Object(x.jsx)("div",{className:"line",children:" "})})})]}),Object(x.jsxs)("div",{className:"w100",children:[Object(x.jsxs)("div",{className:"flex JC-SB comment-top",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"commentator-username",children:n.name}),Object(x.jsx)("span",{className:"comment-timestamp",children:k(n.time)})]}),Object(x.jsxs)("div",{className:"flex noshow-com likes",children:[Object(x.jsx)(g,{condition:n.user_id===t.user_id,children:Object(x.jsx)("div",{onClick:function(){f()},children:"delete"})}),Object(x.jsx)(g,{condition:!u.some((function(e){return e.user_id===t.user_id}))&&n.user_id!==t.user_id,children:Object(x.jsx)("span",{className:"noshow-com",onClick:function(){O(0,0)},children:"LIKEIT"})}),Object(x.jsx)("span",{className:"noshow-com likes-number",children:u.length}),Object(x.jsx)("span",{className:"noshow-com likes-svg"})]})]}),Object(x.jsxs)("div",{className:"comment-content",children:[Object(x.jsx)("p",{children:n.text}),Object(x.jsx)(g,{condition:n.comment_image,children:Object(x.jsx)(L,{img:n.comment_image,className:"post-pic"})})]}),Object(x.jsxs)("div",{className:"flex JC-E comment-bot",children:[Object(x.jsx)("span",{onClick:function(){n.user_id!==t.user_id&&l(!i)},children:Object(x.jsx)("i",{class:"fas fa-smile"})}),Object(x.jsxs)("span",{className:"reaction-number",children:[m.length,Object(x.jsx)(g,{condition:i,children:Object(x.jsx)(P,{reactions:m,fetchLike:O})})]})]})]})]})},I=n(8),A=function(){Object(o.useContext)(K).dispatch;var e=Object(o.useContext)(R).user,t=Object(o.useState)(""),n=Object(h.a)(t,2),s=n[0],c=n[1],r=Object(o.useState)([]),a=Object(h.a)(r,2),i=a[0],l=a[1],u=Object(o.useState)(""),m=Object(h.a)(u,2),p=m[0],O=m[1],f=Object(o.useState)([]),w=Object(h.a)(f,2),v=w[0],_=w[1],N=Object(o.useState)(null),C=Object(h.a)(N,2),k=C[0],S=C[1],P=function(){var t=Object(d.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==s){t.next=2;break}return t.abrupt("return");case 2:return n=new FormData,console.log(JSON.stringify(i)),n.append("user_id",e.user_id),n.append("text",s),n.append("time",y()),n.append("hashtags",JSON.stringify(i)),n.append("image",k),t.next=11,fetch("http://localhost:8080/post/create_post",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,b("/hashtag/get_certain_hashtags/?input=".concat(p),t.signal);case 3:return n=e.sent,console.log(n),_(n.hashtags),e.abrupt("return",(function(){return t.abort()}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("section",{className:"menu-container",children:[Object(x.jsx)(F,{show:"showPosts"}),Object(x.jsxs)("section",{className:"write-post-container",children:[Object(x.jsx)("div",{children:Object(x.jsx)("textarea",{className:"write-post",name:"",id:"",cols:"30",rows:"8",placeholder:"What are you thinking..?",onChange:function(e){return c(e.target.value)}})}),Object(x.jsxs)("div",{className:"flex JC-SB write-post-bot",children:[Object(x.jsx)("input",{className:"file-upload write-post-file",type:"file",name:"image",onChange:function(e){console.log(e.target.files[0]),S(e.target.files[0])}}),Object(x.jsx)("div",{})]}),Object(x.jsx)("div",{className:"flex send-container",children:Object(x.jsx)("button",{className:"send-post-btn",onClick:function(){return P()},children:Object(x.jsx)("i",{class:"fas fa-pencil-alt"})})}),Object(x.jsxs)("section",{className:"flex",children:[Object(x.jsx)("div",{onClick:function(e){console.log(i),i.includes(e.target.textContent)||l((function(t){return[].concat(Object(I.a)(t),[e.target.textContent])}))},children:"#Deltagare"}),Object(x.jsx)("div",{onClick:function(e){console.log(i),i.includes(e.target.textContent)||l((function(t){return[].concat(Object(I.a)(t),[e.target.textContent])}))},children:"#Skola"})]}),Object(x.jsx)("div",{children:"Hashtag:"}),Object(x.jsxs)("section",{className:"flex",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",name:"",onChange:function(e){return O(e.target.value)}}),Object(x.jsx)("button",{onClick:function(){return L()},children:"s\xf6k"}),Object(x.jsx)("button",{onClick:function(){i.includes("#"+p)||l((function(e){return[].concat(Object(I.a)(e),["#"+p])}))},children:"add"})]}),Object(x.jsx)("div",{className:"flex FW-wrap",children:i.map((function(e,t){return console.log(e),Object(x.jsx)("div",{onClick:function(){l(i.filter((function(t){return t!==e})))},children:e},t)}))})]}),Object(x.jsx)(g,{condition:0!==v.length,children:v.map((function(e,t){return Object(x.jsx)("div",{onClick:function(){i.includes(e.content)||l((function(t){return[].concat(Object(I.a)(t),[e.content])}))},children:e.content},t)}))})]})]})})},D=function(e){var t=e.fetchCertainPosts,n=e.setPostFilter,s=Object(o.useContext)(K).dispatch,c=Object(o.useState)(""),r=Object(h.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)([]),u=Object(h.a)(l,2),m=u[0],p=u[1],O=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,b("/hashtag/get_certain_hashtags/?input=".concat(a),t.signal);case 3:return n=e.sent,p(n.hashtags),e.abrupt("return",(function(){return t.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("section",{className:"menu-container",children:[Object(x.jsx)(F,{show:"showPosts"}),Object(x.jsx)("input",{type:"text",name:"",onChange:function(e){return i(e.target.value)}}),Object(x.jsx)("button",{onClick:function(){return O()},children:"s\xf6k"}),Object(x.jsx)(g,{condition:0!==m.length,children:m.map((function(e,c){return Object(x.jsx)("div",{onClick:function(){s({type:"showPosts"}),n(e.content),t(e.content.slice(1))},children:e.content},c)}))})]})})},J=function(e){var t=e.setShowSettings,n=Object(o.useContext)(R).user,s=Object(o.useState)(null),c=Object(h.a)(s,2),r=c[0],a=c[1],i=Object(o.useState)(null),l=Object(h.a)(i,2),u=l[0],m=l[1],b=Object(o.useState)(null),p=Object(h.a)(b,2),O=p[0],f=p[1],g=Object(o.useState)("temp"),w=Object(h.a)(g,2),v=w[0],_=(w[1],function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new FormData).append("image",O),t.append("user_id",n.user_id),t.append("current_password",r),t.append("new_password",u),e.next=7,fetch("/user/user_update",{method:"POST",body:t});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(x.jsxs)("section",{className:"menu-container",children:[Object(x.jsx)("section",{className:"menu-header",children:Object(x.jsxs)("h5",{onClick:function(){return t(!1)},children:[Object(x.jsx)("span",{children:Object(x.jsx)("i",{class:"fas fa-arrow-left"})}),Object(x.jsx)("span",{className:"menu-header-text",children:"tillbaka"})]})}),Object(x.jsx)("h4",{children:"Change password:"}),Object(x.jsxs)("div",{className:"flex FD-C",children:[Object(x.jsx)("label",{htmlFor:"",children:"current:"}),Object(x.jsx)("input",{type:"password",name:"",onChange:function(e){return a(e.target.value)}})]}),Object(x.jsxs)("div",{className:"flex FD-C",children:[Object(x.jsx)("label",{htmlFor:"",children:"new:"}),Object(x.jsx)("input",{type:"password",name:"",onChange:function(e){return m(e.target.value)}})]}),Object(x.jsx)("h4",{children:"Change pic:"}),Object(x.jsx)("input",{className:"file-upload",name:"image",type:"file",src:"",alt:"",onChange:function(e){console.log(e.target.files[0]),console.log(void 0===e.target.files[0]),f(e.target.files[0])}}),Object(x.jsx)("div",{onClick:function(){_()},children:"save"}),Object(x.jsx)("div",{children:v})]})},V=function(e){var t=e.setLoggedIn,n=e.theme,s=e.setTheme,c=Object(o.useContext)(R).user,r=Object(o.useState)(!1),a=Object(h.a)(r,2),i=a[0],l=a[1],u=function(){var e=Object(d.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,b("/user/user_logout",n.signal);case 3:return e.sent,t(!1),e.abrupt("return",(function(){return n.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/user/user_theme_update",{user_id:c.user_id});case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(g,{condition:!i,children:Object(x.jsxs)("section",{className:"menu-container",children:[Object(x.jsx)(F,{show:"showPosts"}),Object(x.jsxs)("section",{children:[Object(x.jsx)("div",{onClick:function(){u()},children:"logout"}),Object(x.jsx)("div",{onClick:function(){l(!0)},children:"settings"}),Object(x.jsx)("div",{onClick:function(){s(0===n?1:0),m()},children:"change theme"})]})]})}),Object(x.jsx)(g,{condition:i,children:Object(x.jsx)(J,{setShowSettings:l})})]})},E=function(e){var t=e.notifications,n=e.setChosenPost,s=Object(o.useContext)(K).dispatch,c=function(e){return"0"===e.type?"".concat(e.NrOfDub," ").concat(e.NrOfDub>1?"nya interaktioner":"ny interaktion",' p\xe5 din post "').concat(e.text.slice(0,10)).concat(e.text.length>10?"...":"",'"'):"1"===e.type?"".concat(e.NrOfDub," ").concat(e.NrOfDub>1?"nya interaktioner":"ny interaktion",' p\xe5 din kommentar "').concat(e.text.slice(0,10)).concat(e.text.length>10?"...":"",'" till ').concat(e.post.name,'s post "').concat(e.post.text.slice(0,10)).concat(e.text.length>10?"...":"",'"'):"Andra\n      har ocks\xe5 kommenterat p\xe5 ".concat(e.post.name,'s post "').concat(e.text.slice(0,10)).concat(e.text.length>10?"...":"",'"')},r=function(){var e=Object(d.a)(j.a.mark((function e(t,c,r,o){var a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new AbortController,e.next=3,b("/post/get_post_data_and_delete_noti/?id=".concat(t,"&compost=").concat(c,"&compost_id=").concat(r,"&type=").concat(o),a.signal);case 3:return i=e.sent,console.log(i),n(i[0]),s({type:"showPostView"}),e.abrupt("return",(function(){return a.abort()}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,s,c){return e.apply(this,arguments)}}();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(F,{show:"showPosts"}),Object(x.jsx)("section",{children:t.map((function(e){return Object(x.jsx)("div",{onClick:function(){r(e.origin,e.post_id?"post_id":"comment_id",e.post_id?e.post_id:e.comment_id,e.type)},children:Object(x.jsx)("div",{children:c(e)})})}))})]})},M=Object(_.a)("div")(r||(r=Object(v.a)(["\n  background-image: url(./static/media/",");\n"])),(function(e){return e.img})),U=function(e){var t=e.post,n=e.setChosenPost;console.log(t.post.user_id);var s=Object(o.useContext)(K).dispatch,c=Object(o.useContext)(R).user,r=t.reactions.filter((function(e){return"0"===e.type&&e.post_id})),a=t.reactions.filter((function(e){return"1"===e.type&&e.post_id})),i=Object(o.useState)(!1),l=Object(h.a)(i,2),u=l[0],m=l[1],O=Object(o.useState)(!1),f=Object(h.a)(O,2),w=f[0],v=(f[1],function(){var e=Object(d.a)(j.a.mark((function e(n,s){var r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.next=3,p("/reaction/create_reaction",{post_id:t.post.post_id,user_id:c.user_id,type:n,comment_id:"null",reaction:s,hashtags:t.hashtags});case 3:return r=e.sent,console.log(r),e.next=7,p("/notification/create_notification",{time:y(),post_id:t.post.post_id,comment_id:"null",type:0,notiUsers:[t.post.user_id],origin:t.post.post_id,post_user:t.post.user_id});case 7:o=e.sent,console.log(o);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=function(){var e=Object(d.a)(j.a.mark((function e(){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,b("/post/delete_post/?id=".concat(t.post.post_id),n.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return n.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,b("/hashtags/get_certain_hashtags/?hashtag=".concat(t),n.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return n.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return w?Object(x.jsx)("h3",{children:"loading .."}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{onClick:function(){n(null)},children:Object(x.jsx)(F,{show:"showPosts"})}),Object(x.jsxs)("section",{className:"flex single-post",onClick:function(e){},children:[Object(x.jsxs)("div",{className:"author-img-container",children:[Object(x.jsx)(M,{img:t.user.image,className:"author-img"}),Object(x.jsx)(g,{condition:t.comments.length>0,children:Object(x.jsxs)("div",{className:"comment-line",children:[Object(x.jsx)("div",{className:"line"}),Object(x.jsx)("div",{className:"corner"})]})})]}),Object(x.jsxs)("div",{className:"w100",children:[Object(x.jsxs)("div",{className:"flex JC-SB post-top",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"author-username",children:t.user.name}),Object(x.jsx)("span",{className:"post-timestamp",children:k(t.post.time)})]}),Object(x.jsxs)("div",{className:"flex noshow-com likes",children:[Object(x.jsx)(g,{condition:t.post.user_id===c.user_id,children:Object(x.jsx)("div",{onClick:function(){_()},children:"delete"})}),Object(x.jsx)(g,{condition:!r.some((function(e){return e.user_id===c.user_id}))&&t.post.user_id!==c.user_id,children:Object(x.jsx)("span",{className:"noshow-com",onClick:function(){v(0,0)},children:"LIKEIT"})}),Object(x.jsx)("span",{className:"noshow-com likes-number",children:r.length}),Object(x.jsx)("span",{className:"noshow-com likes-svg"})]})]}),Object(x.jsxs)("div",{className:"post-content",children:[Object(x.jsx)("p",{className:"post-text-content",children:t.post.text}),Object(x.jsx)(g,{condition:t.post.image,children:Object(x.jsx)(M,{img:t.post.image,className:"post-pic"})})]}),Object(x.jsxs)("div",{className:"flex JC-SB post-bot",children:[Object(x.jsx)("div",{className:"flex FW-wrap",children:t.hashtags.map((function(e){return Object(x.jsx)("span",{onClick:function(){return N(e.content.slice(1))},className:"noshow-com post-hashtag ".concat(e.searched?"searched":""),children:e.content})}))}),Object(x.jsxs)("div",{className:"flex",children:[Object(x.jsx)("span",{className:"noshow-com",onClick:function(){t.post.user_id!==c.user_id&&m(!u)},children:Object(x.jsx)("i",{className:"fas fa-smile noshow-com"})}),Object(x.jsxs)("span",{className:"reaction-number",children:[a.length,Object(x.jsx)(g,{condition:u,children:Object(x.jsx)(P,{reactions:a,fetchLike:v})})]})]})]})]})]}),t.comments.map((function(e,n){return console.log(e),Object(x.jsx)(B,{user:c,comment:e,index:n,length:t.comments.length-1,postHashtags:t.hashtags})})),Object(x.jsx)("div",{onClick:function(){s({type:"showWriteComment"})},children:"comment"})]})},B=function(e){var t=e.user,n=e.comment,s=e.index,c=e.length,r=(e.postHashtags,Object(o.useState)(!1)),a=Object(h.a)(r,2),i=a[0],l=a[1],u=n.reactions.filter((function(e){return"0"===e.type&&e.comment_id})),m=n.reactions.filter((function(e){return"1"===e.type&&e.comment_id})),O=function(){var e=Object(d.a)(j.a.mark((function e(s,c){var r,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/reaction/create_reaction",{post_id:"null",user_id:t.user_id,type:s,reaction:c,comment_id:n.comment_id,hashtags:[]});case 2:return r=e.sent,console.log(r),e.next=6,p("/notification/create_notification",{time:y(),post_id:"null",comment_id:n.comment_id,type:1,notiUsers:[n.user_id],origin:n.post_id,post_user:!1});case 6:o=e.sent,console.log(o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,b("/comment/delete_comment/?id=".concat(n.comment_id),t.signal);case 3:return s=e.sent,console.log(s),e.abrupt("return",(function(){return t.abort()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("section",{className:"flex comment-container",children:[Object(x.jsxs)("div",{className:"comment-img-container",children:[Object(x.jsx)(M,{img:n.image,className:"commentator-user-img"}),Object(x.jsx)(g,{condition:s!==c,children:Object(x.jsx)("div",{className:"comment-line",children:Object(x.jsx)("div",{className:"line",children:" "})})})]}),Object(x.jsxs)("div",{className:"w100",children:[Object(x.jsxs)("div",{className:"flex JC-SB comment-top",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"commentator-username",children:n.name}),Object(x.jsx)("span",{className:"comment-timestamp",children:k(n.time)})]}),Object(x.jsxs)("div",{className:"flex noshow-com likes",children:[Object(x.jsx)(g,{condition:n.user_id===t.user_id,children:Object(x.jsx)("div",{onClick:function(){f()},children:"delete"})}),Object(x.jsx)(g,{condition:!u.some((function(e){return e.user_id===t.user_id}))&&n.user_id!==t.user_id,children:Object(x.jsx)("span",{className:"noshow-com",onClick:function(){O(0,0)},children:"LIKEIT"})}),Object(x.jsx)("span",{className:"noshow-com likes-number",children:u.length}),Object(x.jsx)("span",{className:"noshow-com likes-svg"})]})]}),Object(x.jsxs)("div",{className:"comment-content",children:[Object(x.jsx)("p",{children:n.text}),Object(x.jsx)(g,{condition:n.comment_image,children:Object(x.jsx)(M,{img:n.comment_image,className:"post-pic"})})]}),Object(x.jsxs)("div",{className:"flex JC-E comment-bot",children:[Object(x.jsx)("span",{onClick:function(){n.user_id!==t.user_id&&l(!i)},children:Object(x.jsx)("i",{class:"fas fa-smile"})}),Object(x.jsxs)("span",{className:"reaction-number",children:[m.length,Object(x.jsx)(g,{condition:i,children:Object(x.jsx)(P,{reactions:m,fetchLike:O})})]})]})]})]})},H=function(e){var t=e.postFilter,n=e.setPostFilter,s=(e.setCertainPosts,e.mainHashtags),c=e.fetchCertainPosts,r=e.fetchPosts,a=e.setPostsLoading,i=Object(o.useContext)(K).dispatch;return Object(x.jsxs)("div",{className:"flex",children:[Object(x.jsx)("div",{className:"ALL"===t?"filter":"",onClick:Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"showPosts"}),a(!0),n("ALL"),t=new AbortController,e.next=6,r(t.signal);case 6:return e.abrupt("return",(function(){return t.abort()}));case 7:case"end":return e.stop()}}),e)}))),children:"ALL"}),s.map((function(e){return Object(x.jsx)("div",{className:t===e.content?"filter":"",onClick:function(){i({type:"showPosts"}),a(!0),n(e.content),c(e.content.slice(1))},children:e.content})}))]})},K=Object(o.createContext)(null),q=function(e,t){switch(t.type){case"showPosts":return{showPosts:!0,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1};case"showMenu":return{showPosts:!1,showMenu:!0,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1};case"showSearch":return{showPosts:!1,showMenu:!1,showSearch:!0,showPostView:!1,showWritePost:!1,showWriteComment:!1};case"showPostView":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!0,showWritePost:!1,showWriteComment:!1};case"showWritePost":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!0,showWriteComment:!1};case"showWriteComment":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!0};case"showNotifications":return{showPosts:!1,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1,showNotifications:!0}}},G=function(e){var t=e.setLoggedIn,n=e.theme,s=e.setTheme,c=Object(o.useContext)(R).user,r=Object(o.useReducer)(q,{showPosts:!0,showMenu:!1,showSearch:!1,showPostView:!1,showWritePost:!1,showWriteComment:!1,showNotifications:!1}),a=Object(h.a)(r,2),i=a[0],l=a[1],u=Object(o.useState)(0),m=Object(h.a)(u,2),p=m[0],O=m[1],f=Object(o.useState)(!1),w=Object(h.a)(f,2),v=w[0],_=w[1],N=Object(o.useState)([]),k=Object(h.a)(N,2),y=k[0],P=k[1],F=Object(o.useState)([]),L=Object(h.a)(F,2),T=L[0],I=L[1],J=Object(o.useState)(null),M=Object(h.a)(J,2),B=M[0],G=M[1],Y=Object(o.useState)("ALL"),z=Object(h.a)(Y,2),Q=z[0],X=z[1],Z=Object(o.useState)([]),$=Object(h.a)(Z,2),ee=$[0],te=$[1],ne=Object(o.useState)([]),se=Object(h.a)(ne,2),ce=se[0],re=se[1],oe=Object(o.useState)(!0),ae=Object(h.a)(oe,2),ie=ae[0],le=ae[1],ue=Object(o.useState)(!1),je=Object(h.a)(ue,2),de=je[0],he=je[1],me=Object(o.useState)(!1),be=Object(h.a)(me,2),pe=(be[0],be[1],function(){var e=Object(d.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,e.next=3,b("/post/get_certain_posts_data/?input=".concat(t,"&page=").concat(p),n.signal);case 3:return s=e.sent,console.log(s),P(s[0].posts),s[1].nextPage?_(!0):_(!1),he(!1),e.abrupt("return",(function(){return n.abort()}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/post/get_posts_data/?page=".concat(p),t);case 2:n=e.sent,P(n[0].posts),n[1].nextPage?_(!0):_(!1),he(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,s=y.concat(T),P(s),e.next=5,b("/post/get_posts_data/?page=".concat(t),n.signal);case 5:return c=e.sent,I(c[0].posts),c[1].nextPage?_(!0):_(!1),he(!1),e.abrupt("return",(function(){return n.abort()}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/hashtag/get_user_main_hashtags/?user_id=".concat(c.user_id),t);case 2:n=e.sent,console.log(n),te(n.main_hashtags);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/notification/get_user_notifications/?user=".concat(c.user_id),t);case 2:n=e.sent,console.log(n.notifications),re(n.notifications);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=Object(o.useCallback)(Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,fe(t.signal);case 3:return e.next=5,ge(t.signal);case 5:return e.next=7,xe(t.signal);case 7:return e.abrupt("return",(function(){return t.abort()}));case 8:case"end":return e.stop()}}),e)}))),[]);return Object(o.useEffect)(Object(d.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("FETCHED ALL"),e.next=3,we();case 3:le(!1);case 4:case"end":return e.stop()}}),e)}))),[we]),Object(o.useEffect)((function(){ie||de||document.querySelector(".last").scrollIntoView()}),[de]),ie?Object(x.jsx)("h3",{children:"loading .."}):Object(x.jsxs)(K.Provider,{value:{showState:i,dispatch:l},children:[Object(x.jsxs)(g,{condition:i.showPosts,children:[Object(x.jsx)(C,{}),Object(x.jsxs)("section",{className:"container",children:[Object(x.jsx)(H,{postFilter:Q,setPostFilter:X,mainHashtags:ee,fetchCertainPosts:pe,fetchPosts:xe,setPostsLoading:he}),Object(x.jsx)("div",{onClick:function(){le(!0),we()},children:"update"}),Object(x.jsxs)("div",{onClick:function(){l({type:"showNotifications"})},children:["noti ",ce.length]}),Object(x.jsxs)("div",{className:"posts",children:[Object(x.jsx)(g,{condition:de,children:Object(x.jsx)("div",{children:"small load"})}),Object(x.jsxs)(g,{condition:!de,children:[y.map((function(e,t){return Object(x.jsx)("div",{className:"".concat(t+1===y.length?"last":""),onClick:function(t){t.target.classList.value.includes("noshow-com")||(G(e),l({type:"showPostView"}))},children:Object(x.jsx)(W,{post:e,fetchCertainPosts:pe})},t)})),Object(x.jsx)(g,{condition:T.length>0&&!de,children:T.map((function(e,t){return Object(x.jsx)("div",{className:"post".concat(t),onClick:function(t){t.target.classList.value.includes("noshow-com")||(G(e),l({type:"showPostView"}))},children:Object(x.jsx)(W,{post:e,fetchCertainPosts:pe})},t)}))}),Object(x.jsx)(g,{condition:v,children:Object(x.jsx)("div",{onClick:function(e){he(!0),O(p+1),Oe(p+1)},children:"next page"})})]})]})]})]}),Object(x.jsx)(g,{condition:i.showWritePost,children:Object(x.jsx)(A,{})}),Object(x.jsx)(g,{condition:i.showSearch,children:Object(x.jsx)(D,{setPosts:P,fetchCertainPosts:pe,setPostFilter:X})}),Object(x.jsx)(g,{condition:i.showMenu,children:Object(x.jsx)(V,{setLoggedIn:t,theme:n,setTheme:s})}),Object(x.jsx)(g,{condition:i.showPostView,children:Object(x.jsx)("section",{className:"container",children:Object(x.jsx)("div",{className:"posts",children:Object(x.jsx)(U,{post:B,setChosenPost:G})})})}),Object(x.jsx)(g,{condition:i.showWriteComment,children:Object(x.jsx)(S,{chosenPost:B})}),Object(x.jsx)(g,{condition:i.showNotifications,children:Object(x.jsx)(E,{notifications:ce,setChosenPost:G})})]})},R=Object(o.createContext)(null),Y=function(){var e=Object(o.useState)(null),t=Object(h.a)(e,2),n=t[0],s=t[1],c=Object(o.useState)(0),r=Object(h.a)(c,2),a=r[0],i=r[1],l=Object(o.useState)(!1),u=Object(h.a)(l,2),m=u[0],p=u[1],O=function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/user/is_loggedin",t);case 2:if(!(n=e.sent).fail){e.next=7;break}return e.abrupt("return",console.log("islogged in false"));case 7:s(n.user),i(n.user.theme),p(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)(Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,e.next=3,O(t.signal);case 3:return e.abrupt("return",(function(){return t.abort()}));case 4:case"end":return e.stop()}}),e)}))),[]),Object(x.jsx)("div",{className:"App ".concat(0===a?"light":"dark"),children:Object(x.jsxs)(R.Provider,{value:{user:n},children:[Object(x.jsx)(g,{condition:!m,children:Object(x.jsx)(w,{setLoggedIn:p,theme:a,setTheme:i,setUser:s})}),Object(x.jsx)(g,{condition:m,children:Object(x.jsx)(G,{setLoggedIn:p,theme:a,setTheme:i})})]})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),s(e),c(e),r(e),o(e)}))};l.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(Y,{})}),document.getElementById("root")),z()}},[[31,1,2]]]);